name = "lametric-backend"
main = "src/index.ts"
compatibility_date = "2024-01-01"
workers_dev = true

# KV namespace binding
# Run: wrangler kv:namespace create CLOCK_DATA
# Then update the id below with the returned namespace ID
[[kv_namespaces]]
binding = "CLOCK_DATA"
id = "d069416f7d2044eda76d4a0e8a1dde56"

# Cron triggers - runs every 5 minutes
[triggers]
crons = ["*/5 * * * *"]

# App toggle configuration
# Comma-separated list of enabled apps (e.g., "counter,osrs")
# Remove an app from this list to completely disable it
[vars]
ENABLED_APPS = "counter,osrs,scryfall"

# For production: Set ENABLE_SCRYFALL_THROTTLING via Cloudflare dashboard or wrangler secret
# This enables hourly throttling (X:00 only). Omit in local dev for easier testing.
# wrangler secret put ENABLE_SCRYFALL_THROTTLING --text "true"

# Environment variables for API keys
# Set via: wrangler secret put KEY_NAME

[observability]
enabled = false
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = false
persist = true
head_sampling_rate = 1